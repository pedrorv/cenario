<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <script type="text/javascript" src="js/d3.v3.min.js"></script>
    <script type="text/javascript" src="js/specifications.js"></script>
    <script type="text/javascript" src="js/auxiliarfunctions.js"></script>
    <script type="text/javascript" src="js/nationalities.js"></script>
    <script type="text/javascript" src="js/overview.js"></script>
    <script type="text/javascript" src="js/recordists.js"></script>
    <script type="text/javascript" src="js/production.js"></script>
    <link href='https://fonts.googleapis.com/css?family=Dosis:400' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Raleway:400,300,600' rel='stylesheet' type='text/css'>
    <link type="text/css" rel="stylesheet" href="css/normalize.css"/>
    <link type="text/css" rel="stylesheet" href="css/style.css"/>
  </head>
  <body>

    <div class="menu-container">
      <nav class="menu">
        <div class="vis-selector">
          <a href="http://pedrorv.github.io/cenario"><h1>CEN&Aacute;RIO</h1></a>
          <a class="nav vis-selection overview selected-vis" href="#">P&uacute;blico e N&uacute;mero de T&iacute;tulos</a>
          <a class="nav vis-selection nationalities" href="#">Nacionalidades</a>
          <a class="nav vis-selection recordists" href="#">Nacionais Recordistas de P&uacute;blico</a>
          <a class="nav vis-selection production" href="#">Produ&ccedil;&atilde;o Nacional</a>
          <a class="nav " href="#">Sobre | Quem</a>
        </div>
      </nav>
    </div>

    <div class="visualization" id="container">

    <script type="text/javascript">

      // Create a svg and resize according to user screen
      var svg = d3.select("div.visualization")
          .append("svg")
          .attr("class", "vis")
          .attr("width", visConfig.width)
          .attr("height", visConfig.height);

      var userWindowWidth = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;
      scaleSvg(scaleRatio(userWindowWidth, visConfig.width, visConfig.baseWidth));

      // Create first vis acoording to user screen
      createVisOverview(userWindowWidth);
      
      // Adjust vis on screen resize
      d3.select(window).on("resize", function() {
        var userWindowWidth = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth,
            ratio = scaleRatio(userWindowWidth, visConfig.width, visConfig.baseWidth);
        scaleSvg(ratio);
        scaleVis(ratio);
      });

      function visualSelection(reference) {
        d3.selectAll(".vis-selection").classed("selected-vis", false);
        d3.select(reference).classed("selected-vis", true);
      }

      var visSelectors = d3.selectAll(".vis-selection").on("click", function() {
        visualSelection(this);
      });

      function changeVis (reference, newVis) {
        userWindowWidth = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;
        d3.selectAll("div#word-cloud").remove();
        visualSelection(reference);
        deleteVis();
        newVis(userWindowWidth);
        resizeFun = newVis;
      }

      var visOverview = d3.select("a.overview").on("click", function() {
        changeVis(this, createVisOverview);
      });

      var visNationalities = d3.select("a.nationalities").on("click", function() {
        changeVis(this, createVisNationalities);
      });

      var visRecordists = d3.select("a.recordists").on("click", function() {
        changeVis(this, createVisRecordists);
      });

      var visProduction = d3.select("a.production").on("click", function() {
        changeVis(this, createVisProduction);
      });


    </script>
  </body>
</html>
